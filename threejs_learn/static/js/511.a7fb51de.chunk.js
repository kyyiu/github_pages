"use strict";(self.webpackChunkthree=self.webpackChunkthree||[]).push([[511],{3511:function(e,r,t){t.r(r),t.d(r,{default:function(){return T}});var n=t(2791),o=t(1022),a=t(9738),i=t(6145),s=t(5671),d=t(3144),c=t(136),u=t(7277),l=new WeakMap,f=function(e){(0,c.Z)(t,e);var r=(0,u.Z)(t);function t(e){var n;return(0,s.Z)(this,t),(n=r.call(this,e)).decoderPath="",n.decoderConfig={},n.decoderBinary=null,n.decoderPending=null,n.workerLimit=4,n.workerPool=[],n.workerNextTaskID=1,n.workerSourceURL="",n.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},n.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"},n}return(0,d.Z)(t,[{key:"setDecoderPath",value:function(e){return this.decoderPath=e,this}},{key:"setDecoderConfig",value:function(e){return this.decoderConfig=e,this}},{key:"setWorkerLimit",value:function(e){return this.workerLimit=e,this}},{key:"load",value:function(e,r,t,n){var a=this,i=new o.hH6(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(function(e){a.decodeDracoFile(e,r).catch(n)}),t,n)}},{key:"decodeDracoFile",value:function(e,r,t,n){var o={attributeIDs:t||this.defaultAttributeIDs,attributeTypes:n||this.defaultAttributeTypes,useUniqueIDs:!!t};return this.decodeGeometry(e,o).then(r)}},{key:"decodeGeometry",value:function(e,r){var t,n=this,o=JSON.stringify(r);if(l.has(e)){var a=l.get(e);if(a.key===o)return a.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var i=this.workerNextTaskID++,s=e.byteLength,d=this._getWorker(i,s).then((function(n){return t=n,new Promise((function(n,o){t._callbacks[i]={resolve:n,reject:o},t.postMessage({type:"decode",id:i,taskConfig:r,buffer:e},[e])}))})).then((function(e){return n._createGeometry(e.geometry)}));return d.catch((function(){return!0})).then((function(){t&&i&&n._releaseTask(t,i)})),l.set(e,{key:o,promise:d}),d}},{key:"_createGeometry",value:function(e){var r=new o.u9r;e.index&&r.setIndex(new o.TlE(e.index.array,1));for(var t=0;t<e.attributes.length;t++){var n=e.attributes[t],a=n.name,i=n.array,s=n.itemSize;r.setAttribute(a,new o.TlE(i,s))}return r}},{key:"_loadLibrary",value:function(e,r){var t=new o.hH6(this.manager);return t.setPath(this.decoderPath),t.setResponseType(r),t.setWithCredentials(this.withCredentials),new Promise((function(r,n){t.load(e,r,void 0,n)}))}},{key:"preload",value:function(){return this._initDecoder(),this}},{key:"_initDecoder",value:function(){var e=this;if(this.decoderPending)return this.decoderPending;var r="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return r?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then((function(t){var n=t[0];r||(e.decoderConfig.wasmBinary=t[1]);var o=h.toString(),a=["/* draco decoder */",n,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join("\n");e.workerSourceURL=URL.createObjectURL(new Blob([a]))})),this.decoderPending}},{key:"_getWorker",value:function(e,r){var t=this;return this._initDecoder().then((function(){if(t.workerPool.length<t.workerLimit){var n=new Worker(t.workerSourceURL);n._callbacks={},n._taskCosts={},n._taskLoad=0,n.postMessage({type:"init",decoderConfig:t.decoderConfig}),n.onmessage=function(e){var r=e.data;switch(r.type){case"decode":n._callbacks[r.id].resolve(r);break;case"error":n._callbacks[r.id].reject(r);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+r.type+'"')}},t.workerPool.push(n)}else t.workerPool.sort((function(e,r){return e._taskLoad>r._taskLoad?-1:1}));var o=t.workerPool[t.workerPool.length-1];return o._taskCosts[e]=r,o._taskLoad+=r,o}))}},{key:"_releaseTask",value:function(e,r){e._taskLoad-=e._taskCosts[r],delete e._callbacks[r],delete e._taskCosts[r]}},{key:"debug",value:function(){console.log("Task load: ",this.workerPool.map((function(e){return e._taskLoad})))}},{key:"dispose",value:function(){for(var e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}]),t}(o.aNw);function h(){var e,r;function t(e,r,t,n,o,a){var i=a.num_components(),s=t.num_points()*i,d=s*o.BYTES_PER_ELEMENT,c=function(e,r){switch(r){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,o),u=e._malloc(d);r.GetAttributeDataArrayForAllPoints(t,a,c,d,u);var l=new o(e.HEAPF32.buffer,u,s).slice();return e._free(u),{name:n,array:l,itemSize:i}}onmessage=function(n){var o=n.data;switch(o.type){case"init":e=o.decoderConfig,r=new Promise((function(r){e.onModuleLoaded=function(e){r({draco:e})},DracoDecoderModule(e)}));break;case"decode":var a=o.buffer,i=o.taskConfig;r.then((function(e){var r=e.draco,n=new r.Decoder,s=new r.DecoderBuffer;s.Init(new Int8Array(a),a.byteLength);try{var d=function(e,r,n,o){var a,i,s=o.attributeIDs,d=o.attributeTypes,c=r.GetEncodedGeometryType(n);if(c===e.TRIANGULAR_MESH)a=new e.Mesh,i=r.DecodeBufferToMesh(n,a);else{if(c!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");a=new e.PointCloud,i=r.DecodeBufferToPointCloud(n,a)}if(!i.ok()||0===a.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+i.error_msg());var u={index:null,attributes:[]};for(var l in s){var f=self[d[l]],h=void 0,w=void 0;if(o.useUniqueIDs)w=s[l],h=r.GetAttributeByUniqueId(a,w);else{if(-1===(w=r.GetAttributeId(a,e[s[l]])))continue;h=r.GetAttribute(a,w)}u.attributes.push(t(e,r,a,l,f,h))}c===e.TRIANGULAR_MESH&&(u.index=function(e,r,t){var n=t.num_faces(),o=3*n,a=4*o,i=e._malloc(a);r.GetTrianglesUInt32Array(t,a,i);var s=new Uint32Array(e.HEAPF32.buffer,i,o).slice();return e._free(i),{array:s,itemSize:1}}(e,r,a));return e.destroy(a),u}(r,n,s,i),c=d.attributes.map((function(e){return e.array.buffer}));d.index&&c.push(d.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:d},c)}catch(u){console.error(u),self.postMessage({type:"error",id:o.id,error:u.message})}finally{r.destroy(s),r.destroy(n)}}))}}}var w=t(184),y=new o.xsS,v=new o.cPb(45,window.innerWidth/window.innerHeight,.1,50);y.background=new o.Ilk(6313296);var k=new o.SUY;v.position.set(1,1.7,2.8),y.add(v);var p=new o.CP7,b=new a.z(v,p.domElement);b.target.set(0,1,0),b.update(),b.enableDamping=!0,p.setSize(window.innerWidth,window.innerHeight);var m,g,_={},L="";function T(){var e=(0,n.useRef)();function r(){var e,t=Object.keys(_);do{e=Math.floor(Math.random()*t.length)}while(t[e]===L);!function(e){if(L===e.toLocaleLowerCase())return;var r=_[e.toLocaleLowerCase()];if(void 0!==r){var t=m.clipAction(r);"shot"===e&&(t.clampWhenFinished=!0,t.setLoop(o.jAl)),t.reset();var n="shot"===L;L=e.toLocaleLowerCase(),t.play(),g&&(n?g.enabled=!1:g.crossFadeTo(t,.5)),g=t}}(t[e]),setTimeout(r,3e3)}function a(){var e=window.innerWidth,r=window.innerHeight;v.aspect=e/r,v.updateProjectionMatrix(),p.setSize(e,r)}function s(e){var r=k.getDelta();void 0!==m&&m.update(r),p.render(y,v),window.requestAnimationFrame(s)}return(0,n.useEffect)((function(){!function(){var e=new o.vmT(16777215,12303359,1);y.add(e),(new o.Ox3).position.set(.2,1,1)}(),function(){var e=new i.E,n=new f;n.setDecoderPath("./draco/"),e.setDRACOLoader(n),e.load(t(4312),(function(e){y.add(e.scene),e.scene,m=new o.Xcj(e.scene),e.animations.forEach((function(e){_[e.name.toLocaleLowerCase()]=e})),r()}))}(),window.addEventListener("resize",a,!1),e.current.appendChild(p.domElement),s()}),[]),(0,w.jsx)("div",{ref:e})}},4312:function(e,r,t){e.exports=t.p+"static/media/eve.304a7e49fda9d6c81b47.glb"}}]);
//# sourceMappingURL=511.a7fb51de.chunk.js.map